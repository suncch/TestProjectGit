var accordion={loadContent:null,openTab:null};$(function(){var d="";var b=800;accordion.loadContent=function(h,g,e,f){d="#"+h;b=e||800;if(f){a(f)}else{$.getJSON(g,function(i){if(globalUtil.errorHandle(i)){a(i)}})}};accordion.openTab=function(e,g,h,f){window.open(e,"_blank")};var a=function(f){var g=c(f);$(d).ligerAccordion({height:b,changeHeightOnResize:true});for(var e=1;e<=g.length;e++){$("#menutree-"+e).ligerTree({clsBgColor:global_param.tree_menu_backcolor,data:g[e-1],checkbox:false,onBeforeCancelSelect:function(h){if(h.data.url){accordion.openTab(h.data.url+global_param.version,h.data.text,h.data.id,h.data.remark)}return false},nodeWidth:global_param.tree_menu_nodeWidth,btnClickToToggleOnly:false,onExpand:function(h){this.setTreeWidth(global_param.layout_leftWidth-globalUtil.getTreeMaxLevel(this)*22-24)},onClick:function(j){this.setTreeWidth(global_param.layout_leftWidth-globalUtil.getTreeMaxLevel(this)*22-24);if(j!=null&&j.data!=null&&j.data.url){accordion.openTab(j.data.url+global_param.version,j.data.text,j.data.id,j.data.remark)}var i;for(var h=1;h<=g.length;h++){if("menutree-"+h!==this.id){i=$("#menutree-"+h);$(".l-body",i).removeClass("l-selected")}}}})}};var c=function(f){var i=[];var e=f;var h="";var g=1;$.each(e,function(j,k){h+='<div title="'+k.text+'" icon='+k.icon+">";if(k.children){h+="<div>";$.each(k.children,function(l,m){h+='<a href="#" class="" onclick=javascript:accordion.openTab("'+m.url+'","'+m.text+'","'+m.id+'","'+m.remark+'");>'+m.text+"</a><br/>"});h+="</div>"}if(k.childrenTree){h+='<ul id="menutree-'+g+'"></ul>';g+=1;i.push(k.childrenTree)}h+="</div>"});$(d).html(h);return i}});var globalErrorMsg={getErrMsg:function(a,c){var b=this[a];if(typeof c==="number"||typeof c==="string"){return b.replace(/#:(.*?)#/g,c)}if(typeof c==="object"){for(var d in c){b=b.replace(new RegExp("#:"+d+"#","g"),c[d])}}return b},"100000":"请选择一行记录进行修改！","100001":"请选择一行记录进行删除！","100002":"保存成功！","100003":"新增成功！","100004":"修改成功！","100005":"删除成功！","100006":"审核成功！","100007":"请选择一行记录进行审核！","100008":"不允许重复审核！","100009":"请选择一项计划进行修改！","100010":"请选择一项计划进行删除！","100011":"确认删除所选计划？","100012":"保存失败！","100013":"新增失败！","100014":"修改失败！","100015":"此记录已被引用，不允许删除！","100016":"确认删除所选记录？","100017":"删除失败,该记录已经被引用！","100018":"审核失败！","100019":"记录重复！","100020":"确认进行批量审核！","100091":"您没有该操作权限！","100092":"登录超时，请重新登录！","100093":"操作失败！","100094":"请选择一行记录进行查看！","100095":"请选择一行记录进行角色设置！","100025":"上传的文件太大，文件大小不能超过5M！","100026":"不允许上传exe、bat、cmd格式文件！","110015":"上传文件成功！","110016":"上传文件失败！","100035":"上传的文件太大，文件大小不能超过10M！","100036":"仅允许上传rar、zip格式的压缩文件！","100037":"请选择rar、zip格式的压缩文件！","100038":"是否覆盖当前文件？","100039":"您有未上传的附件，确认上传附件？","100040":"请选择上传文件！","100100":"用户名密码错误！","100101":"该用户未分配角色！","100102":"新密码两次输入不一致！<br>请重新输入。","100103":"旧密码输入错误！<br>请重新输入。","100106":"修改成功，请登录系统！","100108":"密码初始化成功！","100107":"验证码错误！","100110":"登录用户名不能为空！","100111":"新密码不能为空！","100112":"新密码确认不能为空！","010201":"部门名称不能为空！","010202":"部门编码不能为空！","010401":"部门标识不能为空！","010402":"部门名称不能为空！","010403":"负责人不能为空！","010404":"部门简称不能为空！","010405":"部门类型不能为空！","010501":"项目名称不能为空！","010502":"项目编码不能为空！","010503":"部门不能为空！","01050101":"项目阶段不能为空！","01050102":"项目阶段负责人不能为空！","010601":"标题不能为空！","010602":"同一类别下标题不能重复！","010603":"类别不能为空！","010604":"请选择一条记录进行权限设置！","010301":"用户账号不能为空！","010302":"姓名不能为空！","010303":"E—mail不能为空！","010304":"所属部门不能为空！","010305":"等级不能为空！","010306":"用户编号不能重复！","010307":"在职状态不能为空！","020101":"不允许修改非本人工作记录！","020102":"部门不允许为空！","020103":"项目名称不允许为空！","020104":"项目阶段不允许为空！","020105":"工作日期不允许为空！","020106":"工作量不允许为空！","020107":"工作内容不允许为空！","020108":"不允许输入非法工作量！","020109":"工作量+请假不允许大于7.5！","020110":"不允许输入非法加班量！","020111":"不允许输入非法请假量！","020112":"工作量,请假,加班不允许同时为0！","020113":"不允许删除非本人工作记录！","020114":"批复内容不允许为空！","020115":"节假日不允许添加工作量！","020116":"开始时间不允许为空！","020117":"结束时间不允许为空！","020118":"请假原因不允许为空！","020119":"请假原因长度不能超过500字符！","020120":"工作内容长度不能超过500字符！","020121":"工作说明长度不能超过250字符！","020122":"备注长度不能超过250字符！","020123":"请假期间已存在记录不允许请假！","020124":"一天填写工作和请假合计不能超过7.5小时!","020125":"已审核的工作不能删除!","020126":"已审核的工作不能修改!","020601":"计划开始日期不能为空！","020602":"计划结束日期不能为空！","020603":"计划内容不能为空！","020604":"计划已经提交，不能修改！","020605":"计划已经提交，不能删除！","020606":"已提交过该周计划，不能重复添加！","020607":"请至少选择一条记录再进行保存！","020608":"计划已经审核，不能修正！","020609":"请选择一项计划进行修正！","020610":"计划已经审核，不能删除！","020611":"请选择一项计划进行审核！","020612":"计划已经审核，不能再次审核！","020613":"请先选择一项计划！","020614":"实际开始日期不能为空！","020615":"实际结束日期不能为空！","020616":"计划已经开始！","020617":"请先开始计划！","020618":"计划已经结束！","020619":"实际开始日期不能为空！","020620":"实际结束日期不能为空！","020621":"计划外新增的任务不能被修正！","020622":"计划外新增的任务不能被删除！","040201":"不允许输入非法请假天数！","040202":"类别不能为空！","040203":"开始休假时间不能为空！","040204":"结束休假时间不能为空！","040205":"代理人不能为空！","040206":"联系电话不能为空！","040207":"休假原因不能为空！","040208":"工作交接不能为空！","040209":"已申请的记录不能进行修改！","050301":"请选择角色！","060101":"工作流启动成功！","060102":"工作流启动失败！"};var form={clearTextClass:null,clearDivTree:null};$(function(){form.clearTextClass=function(a){$.each($("label.error"),function(b,c){if($(c).hasClass("error")){$(c).attr("style","display: none")}});$.each($(":input"),function(b,c){if($(c).hasClass("error")){$(c).removeClass("error")}});if(a===1){$("#resetButnId").click()}};form.clearDivTree=function(a){if(a!=null){$("#"+a).empty()}}});var global_ligerui_extend={initCombox:function(a,b,e){var d=this;var c=$("#"+a).ligerComboBox({data:[],width:e.input_width||135,valueField:e.valueField||"id",textField:e.textField||"text",dest_url:e.dest_url||"",t_col_name:e.t_col_name||"",p_input_name:e.p_input_name||"",c_input_name:e.c_input_name||"",valueFieldID:a+"_hidden",is_linkage:true,def_val:e.def_val||"",onSelected:function(j){var g=this.options;if(g.is_linkage&&$.trim(g.c_input_name)!=""){var f=g.c_input_name.split(",");for(var h=0;h<f.length;h++){d.asyncRequestInitComboxData(f[h])}}if(g.is_linkage&&b){b.call(this,j)}}});return c},initTreeCombox:function(a,b,e){var d=this;var c=$("#"+a).ligerComboBox({width:78,selectBoxWidth:130,selectBoxHeight:150,valueField:e.valueField||"id",textField:e.textField||"text",valueFieldID:a+"_hidden",dest_url:e.dest_url||"",t_col_name:e.t_col_name||"",p_input_name:e.p_input_name||"",c_input_name:e.c_input_name||"",def_val:e.def_val||"",treeLeafOnly:false,tree:{data:[],nodeWidth:133,checkbox:false,parentIcon:null,childIcon:null,onBeforeCancelSelect:function(){return false}},onSelected:function(j){var g=this.options;if(g.is_linkage&&$.trim(g.c_input_name)!=""){var f=g.c_input_name.split(",");for(var h=0;h<f.length;h++){d.asyncRequestInitComboxData(f[h])}}if(g.is_linkage&&b){b.call(this,j)}}});return c},syncRequestInitComboxData:function(f,a){var o=arguments.length;var h=this;for(var t=1;t<o;t++){var p=arguments[t];var g=$("#"+p).ligerGetComboBoxManager();g.setLinkage(false);var k=g.options;var d=k.dest_url;var e=k.t_col_name;var r;if(f==null){r=k.def_val}else{r=f[e]}var v={};var q=k.p_input_name;if(q!=null&&$.trim(q)!=""){var m=q.split(",");for(var s=0;s<m.length;s++){var b=m[s];var l=$("#"+b).ligerGetComboBoxManager();var c=l.options;var u=c.t_col_name;if(f==null){v[u]=$("#"+b+"_hidden").val()}else{v[u]=f[u]}}}$.ajax({type:"GET",url:globalUtil.getTimestampUrl(d),data:v,async:false,dataType:"json",success:function(i){h.setComboxData(g,i,r);g.setLinkage(true)}})}},asyncRequestInitComboxData:function(a){var l=this;var e=$("#"+a).ligerGetComboBoxManager();var n=e.options;var b=n.dest_url;var m=n.def_val;var i={};var f=n.p_input_name;if(f!=undefined&&f!=null&&$.trim(f)!=""){var c=f.split(",");for(var g=0;g<c.length;g++){var k=c[g];var h=$("#"+k).ligerGetComboBoxManager();var n=h.options;var d=n.t_col_name;i[d]=$("#"+k+"_hidden").val()}}$.getJSON(globalUtil.getTimestampUrl(b),i,function(j){l.setComboxData(e,j,m)})},setComboxData:function(c,e,f){var b=c.options.tree;var a=c.textFieldID;if(f==null){f=""}if(e&&e.length>0){c.options.data_own=e;if(b){c.setTreeData(e)}else{c.setData(e)}if(f=="first"){var d=c.options.valueField;c.selectValue(e[0][d])}else{if(f==""){c.selectValue("");$("#"+a).val("")}else{c.selectValue(f)}}}else{c.options.data_own=null;if(b){c.setTreeData([])}else{c.setData([])}c.selectValue("");$("#"+a).val("")}},initComboxDefVal:function(b){var d=arguments.length;for(var c=0;c<d;c++){var a=arguments[c];this.asyncRequestInitComboxData(a)}},syncInitComboxDefVal:function(b){var d=arguments.length;for(var c=0;c<d;c++){var a=arguments[c];this.syncRequestInitComboxData(null,a)}},getSelectComboxData:function(a){var b=$("#"+a).ligerGetComboBoxManager();var c=b.options.valueField;var f=b.options.data_own;var e=$("#"+a+"_hidden").val();if(f&&f.length>0){for(var d=0;d<f.length;d++){if(f[d][c]==e){return f[d]}}}return{}},getComboxVal:function(a){return $("#"+a+"_hidden").val()},clearTree:function(c){var b=$("#"+c).parent();var a=$("#"+c).ligerGetTreeManager();a.destroy();b.append("<div id="+c+"></div>")},getTreeDescendantsList:function(g,h,c){var b=[];var a=g.data;if(a instanceof Array==false){a=g.children}if(a instanceof Array==false&&g.data){a=g.data.children}if(c==null){c="id"}if(a){for(var f=0;f<a.length;f++){var d=true;if(h){for(var j in h){if($.trim(j)==""){continue}if(a[f][j]!=h[j]){d=false;break}}}if(d){b.push(a[f][c])}var e=this.getTreeDescendantsList(a[f],h,c);if(e.length>0){$.each(e,function(k,l){b.push(l)})}}}return b},getTreeChildrenList:function(d,c,b){var h=[];var e=d.data;if(e instanceof Array==false){e=d.children}if(e instanceof Array==false&&d.data){e=d.data.children}if(b==null){b="id"}if(e){for(var g=0;g<e.length;g++){var a=true;if(c){for(var f in c){if($.trim(f)==""){continue}if(e[g][f]!=c[f]){a=false;break}}}if(a){h.push(e[g][b])}}}return h},addRows:function(g,f,c){if(g){var b=g.getData();var a=[];var e=f.length;if(e===undefined){a.push(f)}else{if(e&&e!=0){a=f}}if(typeof(c)==="number"){for(var d=0;d<a.length;d++){b.splice(c,0,a[d])}}else{b=b.concat(a)}g.loadData({Rows:b})}},deleteSelectedRow:function(a){a.deleteSelectedRow()},search:function(a,b){a.set("parms",b);a.changePage("start")},destroy:function(a){if(a){$.ligerui.remove(a);$("#"+a.id).removeAttr("ligeruiid")}},setCellBackgroundColor:function(h,c,e,a){if(h){if(!$.trim(c)||!$.trim(e)||!$.trim(a)){return}var f=h;if(e>f.columns.length||c>f.getData().length){return}var d,b,i;d=f.columns[e];i=f.getRowObj(c);b=f.getCellObj(i,d);$(b).css("background",a)}},updateCell:function(e,c,b,d){if(!e||!c){return}var a=c.options.nowRowindex;e.updateCell(b,d,a)},gridRenderSelectedValue:function(j,g,h,b){var d=b.editor;var f=d.data;if(!f||f.length==0){return}var k=d.valueField;var c=d.textField;for(var e=0,a=f.length;e<a;e++){if(f[e][k]==j[k]){return f[e][c]}}return j[c]},getCellValue:function(d,c,b){if(!d||!c){return}var a=c.options.nowRowindex;return d.currentData.Rows[a][b]}};Number.prototype.toFixed=function(a){return(parseInt(this*Math.pow(10,a)+0.5)/Math.pow(10,a)).toString()};Date.prototype.format=function(a){var c={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};if(/(y+)/.test(a)){a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var b in c){if(new RegExp("("+b+")").test(a)){a=a.replace(RegExp.$1,(RegExp.$1.length==1)?(c[b]):(("00"+c[b]).substr((""+c[b]).length)))}}return a};var globalUtil={RED:"#FF6666",ORANGE:"#FF9933",BLUE:"#5C7DFE",GREEN:"#00FF66",CAL_CREATE:"#3A87AD",CAL_SUBMIT:"#6FB7B7",CAL_UNEXECUTE:"#EA0000",CAL_COMPLETE:"#02C874",CAL_EXTRA:"#0080FF",CAL_DELAY:"#FF8000",CAL_ING:"#FF8000",_intervalIdArray:[],registInterval:function(a){this._intervalIdArray.push(a)},closeAllInterval:function(){for(var a=0;a<this._intervalIdArray.length;a++){window.clearInterval(this._intervalIdArray[a])}this._intervalIdArray=[]},_functionWrapperObj:{},setFunctionWrapper:function(a,b){if(!$.trim(a)||typeof b!="function"){return}if(this._functionWrapperObj[a]==undefined){this._functionWrapperObj[a]=0}this._functionWrapperObj[a]++;b();this._functionWrapperObj[a]--},functionRunOut:function(a,b){if(!$.trim(a)||typeof b!="function"){return}if(this._functionWrapperObj[a]==undefined||this._functionWrapperObj[a]==0){if(this._functionWrapperObj[a+"timer"]){window.clearInterval(this._functionWrapperObj[a+"timer"]);this._functionWrapperObj[a+"timer"]=null}b()}else{if(!this._functionWrapperObj[a+"timer"]){this._functionWrapperObj[a+"timer"]=window.setInterval(function(){this.functionRunOut(a,b)},200)}}},getUrlParameter:function(a){var c=new Object();var g=location.search.substring(1);var f=g.split("&");for(var d=0;d<f.length;d++){var h=f[d].indexOf("=");if(h==-1){continue}var b=f[d].substring(0,h);var e=f[d].substring(h+1);e=decodeURIComponent(e);c[b]=e}return c[a]},getTreeFatherNode:function(a,b){if(!b||!a){return null}var e=a.getNodeDom(b);var d=$(e.target);var c={};if(d.parent().hasClass("l-tree")){return null}if(d.parent().parent("li").length===0){return null}c.target=d.parent().parent("li")[0];c.data=a.getDataByID($(c.target).attr("id"));return c},getTreeMaxLevel:function(b){var a=0;var c=function(e,g){if(a<(g+1)){a=g+1}var f=e&&(e.data||e.children);if(f){for(var d=0;d<f.length;d++){c(f[d],g+1)}}};if(b.length&&b.length>0){$.each(b,function(d,e){c(e,-1)})}else{c(b,-1)}return a},defaultWidth:50,singleWorldWidth:12,getTreeMaxWidth:function(c){var b=this;var a=b.getTreeMaxLevel(c);var d=b.defaultWidth;var e=function(h,k){var f=0;if(h.text){f=h.text.length*b.singleWorldWidth-(a-k)*22;if(d<f){d=f}}var j=h&&(h.data||h.children);if(j){for(var g=0;g<j.length;g++){e(j[g],k+1)}}};e(c,0);return d+22},getTreeWholeWidth:function(c,e){var b=this;e=e||22;var a=b.getTreeMaxLevel(c);var d=b.getTreeMaxWidth(c);return d+a*e},syncGetJson:function(a,c){var b={};$.ajax({type:"GET",url:globalUtil.getTimestampUrl(a),data:c,async:false,dataType:"json",success:function(d){b=d}});return b},_getMainpageObj:function(b){var a=b.parent;while(a!=b){b=a;a=b.parent}return a},clearAllDialog:function(){$(".l-window-mask").remove();$(".l-dialog").remove()},errorHandle:function(a){var b=a&&a.error;if(b==="100091"){globalUtil.errorMsg(globalErrorMsg["100091"]);return false}if(b==="100092"){globalUtil.confirmMsg(globalErrorMsg["100092"],"提示",function(d){if(d){var c=globalUtil._getMainpageObj(parent);c.location.href=global_param.context_name+"/login.html"}else{globalUtil.clearAllDialog()}},true);return false}return true},clearAllCombo:function(){$(".l-box-select").hide()},_mask:{},addMask:function(a){this._mask[a]=$("<div class='l-window-mask' style='display: block;z-index: 9100' id="+a+"></div>").appendTo("body")},delMask:function(a){this._mask[a].remove()},showLoading:function(){$("<div class='l-loading-img' style='display:block;'></div>").appendTo("body");$("<div class='l-loading-text' style='display:block;'></div>").appendTo("body")},closeLoading:function(){$(".l-loading-img").remove();$(".l-loading-text").remove()},setLoadingText:function(a){$(".l-loading-text").html(a)},_alert:function(g,c,b){var d=this;var f;var e=new Date().getTime();d.addMask(e);if(c==="success"){f=$.ligerDialog.success(g,null,null);var a=setTimeout(function(){f.close()},1000);f.options.onHiddenOrClose=function(){d.delMask(e);clearTimeout(a);if(b&&typeof(b)=="function"){b()}};return}else{if(c==="error"){f=$.ligerDialog.error(g,null,b)}else{if(c==="warn"){f=$.ligerDialog.warn(g,null,b)}else{if(c==="alert"){f=$.ligerDialog.alert(g,null,"alert",b)}}}}f.options.onHiddenOrClose=function(){d.delMask(e)}},successMsg:function(b,a){this._alert(b,"success",a)},warnMsg:function(b,a){this._alert(b,"warn",a)},errorMsg:function(b,a){this._alert(b,"error",a)},alertMsg:function(b,a){this._alert(b,"alert",a)},confirmMsg:function(c,e,h,g,a,f){var b=this;var d=$.ligerDialog.confirm(c,e,h);b.addMask("confirm");if(a){d._setHeight(a)}if(f){d._setWidth(f)}d.options.onHiddenOrClose=function(){b.delMask("confirm");if(g){b.clearAllDialog()}}},setDialogHeight:function(a){return document.body.offsetHeight<a?document.body.offsetHeight:a},checkSession:function(a){var c=globalUtil.getCookieValue("cookie_username")||"";var b=globalUtil.getCookieValue("cookie_passwd")||"";a=a||"1";$.getJSON(this.getTimestampUrl("/sysmanage/authorizedStub.do"),{cookieval:c,cookieval2:b},function(d){if(a==="1"){globalUtil.errorHandle(d)}else{var f=d&&d.error;if(globalUtil.isMobile.any()){if(f&&f==="100092"){window.location.href=global_param.context_name+"/m.login.html"}else{window.location.href=global_param.context_name+"/resources/htmlmobile/main_page.html"}}else{var e=globalUtil._getMainpageObj(parent);if(f&&f==="100092"){e.location.href=global_param.context_name+"/login.html"}else{e.location.href=global_param.context_name+"/resources/html/main_page.html"}}}})},getCookieValue:function(b){var a=b||"cookie_username";return $.cookie(a)||""},setCookieValue:function(c,a,b){if(global_param.use_cookie){c=c||"empty";a=a||"";b=b||7;$.cookie(c,a,{expires:b})}},resetCookieValue:function(c,a,b){$.removeCookie(c);globalUtil.setCookieValue(c,a,b)},isMobile:{Android:function(){return navigator.userAgent.match(/Android/i)?true:false},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)?true:false},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)?true:false},Windows:function(){return navigator.userAgent.match(/IEMobile/i)?true:false},any:function(){return(this.Android()||this.BlackBerry()||this.iOS()||this.Windows())}},openTab:function(b,e,a,d){var c=window.parent.window.$;tab=c("#framecenter").ligerGetTabManager();if(tab.isTabItemExist(b)){tab.removeTabItem(b)}if(d){tab.removeAll()}if(a.indexOf("?")>-1){a=a+"&timestamp="+new Date().getTime()}else{a=a+"?timestamp="+new Date().getTime()}tab.addTabItem({tabid:b,text:e,url:a})},removeOtherTab:function(a){var b=window.parent.window.$;tab=b("#framecenter").ligerGetTabManager();tab.removeOther(a)},closeCurrentTab:function(){var a=window.parent.window.$;tab=a("#framecenter").ligerGetTabManager();tab.removeSelectedTabItem()},isEmail:function(a){a=$.trim(a);return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a)},isPhone:function(a){a=$.trim(a);return/^[1][358]\d{9}$/.test(a)},isIdCard:function(d){d=$.trim(d);d=d.toUpperCase();if(d.length==15){if(!/^[0-9]{15}$/.test(d)){return false}var c=d.substring(6,8);var e=d.substring(8,10);var a=d.substring(10,12);var b=new Date(c,parseFloat(e)-1,parseFloat(a));if(b.getYear()!=parseFloat(c)||b.getMonth()!=parseFloat(e)-1||b.getDate()!=parseFloat(a)){return false}else{return true}}else{if(d.length==18){if(!/^[0-9]{17}([0-9]|X)$/.test(d)){return false}var c=d.substring(6,10);var e=d.substring(10,12);var a=d.substring(12,14);var b=new Date(c,parseFloat(e)-1,parseFloat(a));if(b.getFullYear()!=parseFloat(c)||b.getMonth()!=parseFloat(e)-1||b.getDate()!=parseFloat(a)){return false}else{return true}}else{return false}}},getTimestampUrl:function(a){a=$.trim(a);if(a.indexOf("?")>-1){return global_param.context_name+a+"&timestamp="+new Date().getTime()}else{return global_param.context_name+a+"?timestamp="+new Date().getTime()}},isNum:function(a){a=$.trim(a);return/^[1-9]+[0-9]*$/.test(a)},isFloat:function(a){var b=/^(-?((0|[1-9]+)|([1-9]\d*)))(\.\d+)?$/;return b.test(a)},isReal:function(d,c,a){d=$.trim(d);if(!this.isFloat(d)){return false}var b;if(!c){return/^-?\d+(\.\d+)?$/.test(d)}else{if(!a){b=new RegExp("^-?\\d{1,"+c+"}$","")}else{b=new RegExp("^-?\\d{1,"+c+"}(\\.\\d{1,"+a+"})?$","")}}return b.test(d)},changeDecimal:function(a,d){if(!this.isFloat(a)){return a}if($.trim(a).length==0){return""}var c=$.trim(a)+"";var b=new RegExp("-{0,1}[0-9]+(.[0-9]{1,"+d+"}){0,1}","");c=c.match(b)[0];return parseFloat(c)},changeDecimalRound:function(a,b){if(!this.isFloat(a)){return a}return parseFloat(a).toFixed(b)},isEmpty:function(b){if(typeof(b)=="number"){b+=""}var a=b||"";return $.trim(a).length==0},checkSectCode:function(c){var c=$.trim(c);var b=/^([a-z]|[A-Z]|\-|_|\d){1,}$/;if(!b.test(c)){return false}else{return true}},deleteAttributes:function(g,f,c){if(jQuery.isPlainObject(g)){for(var a in g){if((jQuery.isPlainObject(g[a])||jQuery.isArray(g[a]))&&c){globalUtil.deleteAttributes(g[a],f,c)}else{if(g[a]===f){delete g[a]}}}}else{if(jQuery.isArray(g)){var d=[];jQuery.each(g,function(h,j){if((jQuery.isPlainObject(j)||jQuery.isArray(j))&&c){globalUtil.deleteAttributes(j,f,c);if(j.length!=0){d.push(j)}}else{if(j!==f){d.push(j)}}});g.splice(0,g.length);if(d.length!=0){for(var e=0,b=d.length;e<b;e++){g.push(d[e])}}}}},getCurrentDateStr:function(){var b=new Date();var d=b.getFullYear();var e=b.getMonth()+1;var a=b.getDate();var c=d+"-";if(e<10){c+="0"}c+=e+"-";if(a<10){c+="0"}c+=a;return(c)},getCurrentDatetimeStr:function(){var a=new Date();return this._transToDateStr(a)},formatDateStr:function(b,c){c=$.trim(c);var a=c.length;if(b.length<a){return""}return b.substring(0,a)},getDiffDateStr:function(b,c){if(!(b instanceof Date)){b=b.replace(/-/g,"/");b=new Date(b)}b.setDate(b.getDate()+(c));var a=this.formatDateStr(this._transToDateStr(b),"yyyy-MM-dd");return a},getDiffMonthStr:function(b,c){if(!(b instanceof Date)){b=b.replace(/-/g,"/");b=new Date(b)}b.setMonth(b.getMonth()+(c));var a=this.formatDateStr(this._transToDateStr(b),"yyyy-MM-dd");return a},getDiffDateFormatStr:function(b,d,c){if(!(b instanceof Date)){b=b.replace(/-/g,"/");b=new Date(b)}if(d.year){b.setFullYear(b.getFullYear()+(d.year))}if(d.month){b.setMonth(b.getMonth()+(d.month))}if(d.date){b.setDate(b.getDate()+(d.date))}if(d.hour){b.setHours(b.getHours()+(d.hour))}if(d.min){b.setMinutes(b.getMinutes()+(d.min))}if(d.sec){b.setSeconds(b.getSeconds()+(d.sec))}var a=this.formatDateStr(this._transToDateStr(b),c);return a},searchDays:function(c,a){var b;switch(a){case 1:case 3:case 5:case 7:case 8:case 10:case 12:b=31;break;case 4:case 6:case 9:case 11:b=30;break;case 2:if((c%4==0&&c%100!=0||(c%400==0))){b=29}else{b=28}break}return b},getFirstDayOfCurrentMonth:function(){var b=new Date();var d=b.getFullYear();var e=b.getMonth()+1;var a="01";var c=d+"-";if(e<10){c+="0"}c+=e+"-";c+=a;return(c)},getLastDayOfCurrentMonth:function(){var b=new Date();var d=b.getFullYear();var e=b.getMonth()+1;var a=this.searchDays(d,e);var c=d+"-";if(e<10){c+="0"}c+=e+"-";c+=a;return(c)},_transToDateStr:function(h){var f=h.getFullYear();var g=h.getMonth()+1;var b=h.getDate();var a=h.getHours();var d=h.getMinutes();var e=h.getSeconds();var c=f+"-";if(g<10){c+="0"}c+=g+"-";if(b<10){c+="0"}c+=b;c+=" ";if(a<10){c+="0"}c+=a;c+=":";if(d<10){c+="0"}c+=d;c+=":";if(e<10){c+="0"}c+=e;return c},getHtml:function(a){a=$.trim(a);if(a.indexOf("?")>-1){return a+"&timestamp="+new Date().getTime()}else{return a+"?timestamp="+new Date().getTime()}return a},parseDate:function(a){a=a.replace(/-/g,"/");return new Date(a)},compareDate:function(b,a){if(!b||!(b instanceof Date)){return -2}if(!a||!(a instanceof Date)){return -2}var c=b.getTime();var d=a.getTime();if(c>d){return 1}else{if(c<d){return -1}else{return 0}}},registerXlsFlashBtn:function(g,f,d,a,e,c){if(g){ZeroClipboard_TableTools.moviePath=g}var b=new ZeroClipboard_TableTools.Client();b.setHandCursor(true);b.setAction("save");b.setCharSet("UTF16LE");b.setBomInc(true);b.setFileName(f);b.addEventListener("mouseDown",function(l){if(typeof(c)=="function"){var t=c.call(this);if(typeof t=="string"){b.setText(t)}else{var h=navigator.userAgent.match(/Windows/)?"\r\n":"\n";var r=t.title;var k=t.data;var m=[];var u=[];var q=[];for(var s in r){q.push(r[s]);u.push(s)}m.push(q.join("\t"));for(var o=0;o<k.length;o++){q=[];for(var n=0;n<u.length;n++){q.push(k[o][u[n]])}m.push(q.join("\t"))}var p=m.join(h);b.setText(p)}}});b.glue(e,"Save for Excel")},getDivParam:function(h,d,f){if(globalUtil.isEmpty(h)){return}var g={};var e=d.split("#");for(var c in e){var b=e[c];var a=$("#"+h+" "+b);$.each(a,function(j,l){var k=f?l.id.slice(f.length):l.id;var m=l.attributes.ligeruiid?$.trim($("#"+l.id+"_hidden").val()):$.trim($(l).val());if(b==="label"){m=$.trim($(l).html())}if(!globalUtil.isEmpty(m)){g[k]=m}})}return g}};$(function(){$("#left-center").ligerLayout({leftWidth:($("#left-center").attr("leftwidth")?parseInt($("#left-center").attr("leftwidth")):200),allowLeftCollapse:false,allowRightCollapse:false,allowLeftResize:false,allowRightResize:false,rightWidth:($("#left-center").attr("rightwidth")?parseInt($("#left-center").attr("rightwidth")):250)});if(global_param.session_check){var c=window.location.href;var b=true;var a=c.split("/");if(a[a.length-1]==="login.html"||!a[a.length-1]){b=false}if(b){globalUtil.checkSession()}}$("div").ajaxError(function(f,g,d){if(g.readyState==4){globalUtil.errorMsg(globalErrorMsg["100093"])}parent.window.globalUtil.closeAllInterval();return false});$("input[class!='l-text-field'], textarea").bind("click",function(){globalUtil.clearAllCombo()})});var tab={tabObj:null,tabArray:[],tabLimit:1,allTabs:{},addTab:function(d,e,b,a){var c=e||"tree.html";var f=d||"tab";var g="";this.tabObj.removeAll();this.tabObj.addTabItem({tabid:b,text:f,url:c})},initTab:function(c,a,b){this.tabLimit=b||7;this.tabObj=$("#"+c).ligerTab({height:a||600,onBeforeOverrideTabItem:function(d){if(parseInt(d)==145){globalUtil.closeAllInterval()}},onBeforeRemoveTabItem:function(d){if(parseInt(d)==145){globalUtil.closeAllInterval()}}})},_showAlert:function(a){if(this.tabLimit<0){return true}if(!global_param.tab_limit_tip&&this.tabArray.length>=this.tabLimit&&!this.allTabs[a]){global_param.tab_limit_tip=true;$.ligerDialog.warn(global_param.tab_limit_tip_content);return false}return true}};